<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ù…Ø¯ÙŠØ±</title>
    <style>
        body { font-family: sans-serif; background: #f0f2f5; padding: 20px; }
        .admin-container { max-width: 1000px; margin: auto; background: white; padding: 20px; border-radius: 10px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
        .section { border-bottom: 2px solid #eee; padding: 20px 0; }
        .btn { padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; color: white; margin: 5px; }
        .btn-add { background: #28a745; }
        .btn-danger { background: #dc3545; }
        .btn-toggle { background: #007bff; }
        input, textarea { width: 100%; padding: 10px; margin: 10px 0; border: 1px solid #ddd; }
    </style>
</head>
<body>
    <div class="admin-container">
        <h1>Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© ğŸ”</h1>
        
        <div class="section">
            <h3>Ø¥Ø¶Ø§ÙØ© Ø®Ø¨Ø± Ø¬Ø¯ÙŠØ¯</h3>
            <input type="text" id="newsTitle" placeholder="Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø®Ø¨Ø±">
            <textarea id="newsContent" placeholder="Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø®Ø¨Ø±"></textarea>
            <select id="newsCat">
                <option value="Ø¹Ø§Ø¬Ù„">Ø¹Ø§Ø¬Ù„</option>
                <option value="Ø±ÙŠØ§Ø¶Ø©">Ø±ÙŠØ§Ø¶Ø©</option>
                <option value="ØªÙ‚Ù†ÙŠØ©">ØªÙ‚Ù†ÙŠØ©</option>
            </select>
            <button class="btn btn-add" id="postNews">Ù†Ø´Ø± Ø§Ù„Ø®Ø¨Ø±</button>
        </div>

        <div class="section">
            <h3>Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¹Ø§Ù…Ø©</h3>
            <button class="btn btn-toggle" onclick="toggleSetting('chatEnabled')">ØªÙØ¹ÙŠÙ„/ØªØ¹Ø·ÙŠÙ„ Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© Ø§Ù„Ø¹Ø§Ù…Ø©</button>
            <button class="btn btn-toggle" onclick="toggleSetting('likesEnabled')">ØªÙØ¹ÙŠÙ„/ØªØ¹Ø·ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ø¬Ø§Ø¨Ø§Øª</button>
        </div>

        <div class="section">
            <h3>Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…Ø­Ø¬ÙˆØ¨Ø©</h3>
            <input type="text" id="badWord" placeholder="Ø£Ø¶Ù ÙƒÙ„Ù…Ø© Ù„Ø­Ø¬Ø¨Ù‡Ø§">
            <button class="btn btn-add" id="addWord">Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ù‚Ø§Ù…ÙˆØ³</button>
        </div>
    </div>

    <script type="module">
        import { auth, db } from './config.js';
        import { doc, getDoc, addDoc, collection, updateDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø£Ù† Ø§Ù„Ø´Ø®Øµ Ù…Ø¯ÙŠØ± ÙØ¹Ù„Ø§Ù‹ Ù‚Ø¨Ù„ Ø¹Ø±Ø¶ Ø§Ù„ØµÙØ­Ø©
        auth.onAuthStateChanged(async (user) => {
            if (user) {
                const userDoc = await getDoc(doc(db, "Users", user.uid));
                if (userDoc.data().role !== 'admin') {
                    alert("ØºÙŠØ± Ù…Ø³Ù…ÙˆØ­ Ù„Ùƒ Ø¨Ø§Ù„Ø¯Ø®ÙˆÙ„!");
                    window.location.href = "news.html";
                }
            } else {
                window.location.href = "index.html";
            }
        });

        // Ø¥Ø¶Ø§ÙØ© Ø®Ø¨Ø±
        document.getElementById('postNews').onclick = async () => {
            await addDoc(collection(db, "News"), {
                title: document.getElementById('newsTitle').value,
                content: document.getElementById('newsContent').value,
                category: document.getElementById('newsCat').value,
                createdAt: new Date(),
                likes: 0
            });
            alert("ØªÙ… Ù†Ø´Ø± Ø§Ù„Ø®Ø¨Ø±");
        };
    </script>
</body>
</html>
