<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© | Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª</title>
    <link rel="stylesheet" href="style.css">
    <style>
        .stat-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; padding: 15px; }
        .stat-box { background: white; padding: 20px; border-radius: 20px; text-align: center; box-shadow: var(--shadow); }
        .admin-nav { display: flex; gap: 10px; padding: 15px; overflow-x: auto; }
        .nav-card { background: var(--primary); color: white; padding: 10px 20px; border-radius: 12px; text-decoration: none; white-space: nowrap; }
    </style>
</head>
<body>
    <div class="top-bar">
        <b>âš™ï¸ Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</b>
        <button onclick="history.back()" style="border:none; background:none; font-size:20px;">â¡ï¸</button>
    </div>

    <div class="admin-nav">
        <a href="admin_users.html" class="nav-card">ğŸ‘¥ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ø¹Ø¶Ø§Ø¡</a>
        <a href="admin_requests.html" class="nav-card">ğŸ“¥ Ø·Ù„Ø¨Ø§Øª Ø§Ù„ØªÙØ¹ÙŠÙ„</a>
        <a href="admin_categories.html" class="nav-card">ğŸ“ Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª</a>
    </div>

    <div class="stat-grid">
        <div class="stat-box"><h3>Ø§Ù„Ø°ÙƒÙˆØ±</h3><p id="mCount" style="font-size:24px; font-weight:bold; color:var(--primary);">0</p></div>
        <div class="stat-box"><h3>Ø§Ù„Ø¥Ù†Ø§Ø«</h3><p id="fCount" style="font-size:24px; font-weight:bold; color:var(--primary);">0</p></div>
        <div class="stat-box"><h3>Ø£ÙƒØ¨Ø± Ø¹Ù…Ø±</h3><p id="maxAge" style="font-size:24px; font-weight:bold;">0</p></div>
        <div class="stat-box"><h3>Ø£ØµØºØ± Ø¹Ù…Ø±</h3><p id="minAge" style="font-size:24px; font-weight:bold;">0</p></div>
    </div>

<script type="module">
    import { db } from './config.js';
    import { collection, onSnapshot } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

    onSnapshot(collection(db, "Users"), snap => {
        let m=0, f=0, ages=[];
        snap.forEach(d => {
            const u = d.data();
            if(u.gender === 'male') m++; else f++;
            if(u.dob) ages.push(new Date().getFullYear() - new Date(u.dob).getFullYear());
        });
        document.getElementById('mCount').innerText = m;
        document.getElementById('fCount').innerText = f;
        document.getElementById('maxAge').innerText = ages.length ? Math.max(...ages) : 0;
        document.getElementById('minAge').innerText = ages.length ? Math.min(...ages) : 0;
    });
</script>
</body>
</html>
