<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© | Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„ÙƒØ§Ù…Ù„</title>
    <style>
        body { font-family: sans-serif; background: #f4f7f6; padding: 20px; }
        section { background: white; padding: 20px; border-radius: 15px; margin-bottom: 20px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .toggle-box { display: flex; justify-content: space-between; align-items: center; padding: 10px; border-bottom: 1px solid #eee; }
        button { cursor: pointer; padding: 10px; border-radius: 8px; border: none; }
        .btn-on { background: #2ecc71; color: white; }
        .btn-off { background: #e74c3c; color: white; }
    </style>
</head>
<body>

    <div style="max-width: 600px; margin: auto;">
        <h1>Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ âš™ï¸</h1>

        <section>
            <h2>Ø§Ù„ØªØ­ÙƒÙ… ÙÙŠ Ø§Ù„Ù…ÙŠØ²Ø§Øª ğŸ› ï¸</h2>
            <div class="toggle-box">
                <span>ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ø¬Ø§Ø¨Ø§Øª Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø®Ø¨Ø§Ø±</span>
                <button id="toggleLikes" class="btn-on">Ù…ÙØ¹Ù„</button>
            </div>
            <div class="toggle-box">
                <span>ØªÙØ¹ÙŠÙ„ Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨</span>
                <button id="toggleShare" class="btn-on">Ù…ÙØ¹Ù„</button>
            </div>
        </section>
        
        <p style="text-align:center;"><a href="news.html">â† Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a></p>
    </div>

    <script type="module">
        import { db } from './config.js';
        import { doc, getDoc, setDoc, updateDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        const btns = { likes: document.getElementById('toggleLikes'), share: document.getElementById('toggleShare') };
        let currentSettings = { likesEnabled: true, shareEnabled: true };

        async function init() {
            const snap = await getDoc(doc(db, "Settings", "global"));
            if(snap.exists()) {
                currentSettings = snap.data();
                updateUI();
            }
        }

        function updateUI() {
            btns.likes.innerText = currentSettings.likesEnabled ? "Ù…ÙØ¹Ù„" : "Ù…Ø¹Ø·Ù„";
            btns.likes.className = currentSettings.likesEnabled ? "btn-on" : "btn-off";
            btns.share.innerText = currentSettings.shareEnabled ? "Ù…ÙØ¹Ù„" : "Ù…Ø¹Ø·Ù„";
            btns.share.className = currentSettings.shareEnabled ? "btn-on" : "btn-off";
        }

        btns.likes.onclick = async () => {
            currentSettings.likesEnabled = !currentSettings.likesEnabled;
            await setDoc(doc(db, "Settings", "global"), currentSettings, {merge: true});
            updateUI();
        };

        btns.share.onclick = async () => {
            currentSettings.shareEnabled = !currentSettings.shareEnabled;
            await setDoc(doc(db, "Settings", "global"), currentSettings, {merge: true});
            updateUI();
        };

        init();
    </script>
</body>
</html>
