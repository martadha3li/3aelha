<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>ุฅุฏุงุฑุฉ ุงูุชุตูููุงุช</title>
</head>
<body>
    <a href="admin.html">โฌ๏ธ ุงูุนูุฏุฉ</a>
    <h1>ุฅุฏุงุฑุฉ ุชุตูููุงุช ุงูุฃุฎุจุงุฑ</h1>
    <input type="text" id="catName" placeholder="ุงุณู ุงูุชุตููู ุงูุฌุฏูุฏ">
    <button onclick="addCategory()">ุฅุถุงูุฉ ุชุตููู</button>
    
    <div id="catsList" style="margin-top:20px;"></div>

<script type="module">
    import { db } from './config.js';
    import { collection, onSnapshot, addDoc, deleteDoc, doc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

    onSnapshot(collection(db, "Categories"), snap => {
        const list = document.getElementById('catsList');
        list.innerHTML = "";
        snap.forEach(d => {
            list.innerHTML += `<div>๐ ${d.data().name} <button onclick="deleteCat('${d.id}')">ุญุฐู</button></div>`;
        });
    });

    window.addCategory = async () => {
        const name = document.getElementById('catName').value;
        if(!name) return;
        await addDoc(collection(db, "Categories"), { name: name });
        document.getElementById('catName').value = "";
    };

    window.deleteCat = async (id) => { if(confirm("ุญุฐู ุงูุชุตูููุ")) await deleteDoc(doc(db, "Categories", id)); };
</script>
</body>
</html>
