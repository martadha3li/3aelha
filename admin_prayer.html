<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>لوحة إدارة أوقات الصلاة</title>
    <link rel="stylesheet" href="style.css">
    <style>
        body { font-family: Arial, sans-serif; background: #f0f0f0; margin:0; padding:0; }
        .container { max-width: 700px; margin: 30px auto; background: #fff; padding: 25px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);}
        h1 { text-align: center; color: #007AFF; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { padding: 12px; text-align: center; border-bottom: 1px solid #ddd; }
        th { background-color: #007AFF; color: #fff; }
        input[type="time"] { padding: 5px; width: 80px; text-align: center; }
        button { padding: 8px 12px; margin: 5px; border: none; background-color: #007AFF; color: #fff; border-radius: 5px; cursor: pointer; }
        button:hover { background-color: #005BB5; }
    </style>
</head>
<body>
    <div class="container">
        <h1>لوحة إدارة أوقات الصلاة</h1>
        <table>
            <thead>
                <tr>
                    <th>الصلاة</th>
                    <th>الأحساء</th>
                    <th>الدمام</th>
                    <th>الرياض</th>
                    <th>أدوات</th>
                </tr>
            </thead>
            <tbody id="admin-prayer-body">
                <!-- سيتم تعبئة الجدول ديناميكياً -->
            </tbody>
        </table>
        <button onclick="saveTimes()">حفظ التعديلات</button>
    </div>

    <script>
        let prayerTimes = {
            Fajr: "04:45",
            Dhuhr: "12:15",
            Asr: "15:45",
            Maghrib: "18:30",
            Isha: "20:00"
        };

        const cityDiff = { Dammam: 2, Riyadh: -3 };
        const tbody = document.getElementById('admin-prayer-body');

        function loadTable() {
            tbody.innerHTML = '';
            for (let prayer in prayerTimes) {
                const timeAh = prayerTimes[prayer];
                const timeDh = adjustMinutes(timeAh, cityDiff.Dammam);
                const timeRy = adjustMinutes(timeAh, cityDiff.Riyadh);

                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${prayer}</td>
                    <td><input type="time" value="${timeAh}" onchange="updateTime('${prayer}', this.value)"></td>
                    <td>${timeDh}</td>
                    <td>${timeRy}</td>
                    <td><button onclick="resetTime('${prayer}')">إعادة</button></td>
                `;
                tbody.appendChild(row);
            }
        }

        function updateTime(prayer, value) {
            prayerTimes[prayer] = value;
            loadTable();
        }

        function resetTime(prayer) {
            prayerTimes[prayer] = {
                Fajr: "04:45",
                Dhuhr: "12:15",
                Asr: "15:45",
                Maghrib: "18:30",
                Isha: "20:00"
            }[prayer];
            loadTable();
        }

        function saveTimes() {
            // حفظ إلى Firebase أو LocalStorage حسب الربط
            console.log('Times saved:', prayerTimes);
            alert('تم حفظ أوقات الصلاة بنجاح!');
        }

        function adjustMinutes(timeStr, diff) {
            let [h, m] = timeStr.split(':').map(Number);
            m += diff;
            if (m >= 60) { h += 1; m -= 60; }
            if (m < 0) { h -= 1; m += 60; }
            if (h >= 24) h -= 24;
            if (h < 0) h += 24;
            return `${String(h).padStart(2,'0')}:${String(m).padStart(2,'0')}`;
        }

        loadTable();
    </script>
</body>
</html>
