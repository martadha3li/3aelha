<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>إعداد المواقيت</title>
<style>
body{font-family:-apple-system;background:#f2f2f7;padding:20px}
.card{background:white;padding:15px;border-radius:15px;margin-bottom:20px}
input{padding:8px;border-radius:8px;border:1px solid #ccc;width:60px}
button{padding:10px;border:none;border-radius:10px;background:#0A84FF;color:white;margin-top:10px}
table{width:100%;border-collapse:collapse;margin-top:10px}
td,th{border:1px solid #ddd;padding:5px;text-align:center}
</style>
</head>
<body>

<div class="card">
<h3>زيادة عامة (دقائق)</h3>
الفجر <input id="gfajr">
الظهر <input id="gdhuhr">
العصر <input id="gasr">
المغرب <input id="gmaghrib">
العشاء <input id="gisha">
<button onclick="saveGlobal()">حفظ</button>
</div>

<div class="card">
<h3>تعديل يوم محدد</h3>
اليوم <input id="day">
الفجر <input id="dfajr">
المغرب <input id="dmaghrib">
<button onclick="saveDay()">حفظ اليوم</button>
</div>

<script type="module">
import { db } from './config.js';
import { doc,setDoc,getDoc } from 
"https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

let adjustments={global:{},daily:{}};

async function load(){
let snap=await getDoc(doc(db,"Settings","Adjustments"));
if(snap.exists()) adjustments=snap.data();
}
load();

window.saveGlobal=async function(){
adjustments.global={
fajr:+gfajr.value||0,
dhuhr:+gdhuhr.value||0,
asr:+gasr.value||0,
maghrib:+gmaghrib.value||0,
isha:+gisha.value||0
};
await setDoc(doc(db,"Settings","Adjustments"),adjustments);
alert("تم الحفظ");
}

window.saveDay=async function(){
let d=day.value;
adjustments.daily[d]={
fajr:+dfajr.value||0,
maghrib:+dmaghrib.value||0
};
await setDoc(doc(db,"Settings","Adjustments"),adjustments);
alert("تم حفظ اليوم");
}
</script>

</body>
</html>
